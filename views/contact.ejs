<!-- contact.ejs -->
<!DOCTYPE html>
<html lang="en">
    <%- include("partials/_header") %>
<head>
    <title>Contact Page</title>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.9/css/unicons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/contactsyle.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <script src="https://kit.fontawesome.com/00541e821b.js" crossorigin="anonymous"></script>
  </link>
</head>
<body>
    <div class="img">
    <%- include("partials/_menu") %>

    <section>
        <form id="request" class="main_form" action="/contact" method="POST">
            <div class="col-md-12">
                <div style="display:none;" class="alert alert-success" id="sendMessage"></div>
            </div>
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
    
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
    
            <label for="message">Message:</label>
            <textarea id="message" name="message" rows="4" required></textarea>
    
            <button type="submit">Submit</button>
        </form>
    </section>
</div>
    <script>
      const form = document.querySelector('#request')
      const sendMessage = document.querySelector('#sendMessage')

      form.addEventListener("submit", async (e) => {
         e.preventDefault();


         const name = form.name.value
         const email = form.email.value
         const message = form.message.value
  

         try {
            const res = await fetch('/contact', {
               method: "POST",
               body: JSON.stringify({ name, email, message}),
               headers: { "Content-Type": "application/json" }
            })

            const data = await res.json();

            if (data.succeeded) {
                sendMessage.textContent = "Your Message Received." 
                sendMessage.style.display="block"
            }
         } catch (err) {
            console.log("ERR::", err)
         }
      })
   </script>
</body>
</html>
